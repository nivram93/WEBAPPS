<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WEBAPPS | Welcome</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <script src="js/vendor/modernizr.js"></script>
	<style>
		#titleinput {
			margin-bottom: 0px;
		}
		
		.card {
			
		}

		.cardmessage {
			font-size: 12px;
		}

		.panel-content {
			background-color: rgb(52, 75, 108);
		}

		.edit {
			float: right;
		}

		body { font-size: 80%; font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif; }
      	ul#tabs { list-style-type: none; margin: 30px 0 0 0; padding: 0 0 0.3em 0; }
      	ul#tabs li { display: inline; }
     	ul#tabs li a { color: #42454a; background-color: #dedbde; border: 1px solid #c9c3ba; border-bottom: none; padding: 0.3em; text-decoration: none; }
      	ul#tabs li a:hover { background-color: #f1f0ee; }
      	ul#tabs li a.selected { color: #000; background-color: #f1f0ee; font-weight: bold; padding: 0.7em 0.3em 0.38em 0.3em; }
      	div.tabContent { border: 1px solid #c9c3ba; padding: 0.5em; background-color: #f1f0ee; }
      	div.tabContent.hide { display: none; }


	</style>
	
	<script>
		var tabLinks = new Array();
	    var contentDivs = new Array();

	    function init() {

	      	// Grab the tab links and content divs from the page
	      	var tabListItems = document.getElementById('tabs').childNodes;
	      	for ( var i = 0; i < tabListItems.length; i++ ) {
	        	if ( tabListItems[i].nodeName == "LI" ) {
	          		var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
	          		var id = getHash( tabLink.getAttribute('href') );
	          		tabLinks[id] = tabLink;
	          		contentDivs[id] = document.getElementById( id );
	          		contentDivs[id].appendChild(newCardBlock());
	        	}
	      	}

		    // Assign onclick events to the tab links, and
		    // highlight the first tab
		    var i = 0;

	      	for ( var id in tabLinks ) {
	        	tabLinks[id].onclick = showTab;
	        	tabLinks[id].onfocus = function() { this.blur() };
	        	if ( i == 0 ) tabLinks[id].className = 'selected';
	        	i++;
	      	}

	      	// Hide all content divs except the first
	     	var i = 0;
	     	if(contentDivs.length >= 1)
	     		contentDivs[0].appendChild(newCardBlock());
	      	for ( var id in contentDivs ) {
	        	if ( i != 0 ) {
	        		contentDivs[id].className = 'tabContent hide';
	        	}
	        	i++;
	      	}
	    }

	    function showTab() {
	      	var selectedId = getHash( this.getAttribute('href') );

	      	// Highlight the selected tab, and dim all others.
	      	// Also show the selected content div, and hide all others.
	      	for ( var id in contentDivs ) {
	        	if ( id == selectedId ) {
	          		tabLinks[id].className = 'selected';
	          		contentDivs[id].className = 'tabContent';

	          		//if(contentDivs[id].childNodes.length == 3)
	          		//	contentDivs[id].appendChild(newCardBlock());
	        	} else {
	          		tabLinks[id].className = '';
	          		contentDivs[id].className = 'tabContent hide';
	          		//if(contentDivs[id].childNodes.length == 3)
	          		//	contentDivs[id].removeChild(contentDivs[id].childNodes[3]);
	        	}
	      	}

	      	// Stop the browser following the link
	      	return false;
	    }

	    function newCardBlock() {
	    	var label = document.createElement("label");
	    	label.innerHTML = "Write a new card";

			var input = document.createElement("input");
			input.id = "titleinput";
			input.type ="text";
			input.placeholder = "Title";

			var textarea = document.createElement("textarea");
			textarea.id = "messageinput";
			textarea.setAttribute("class", "expand");
			textarea.rows = "1";
			textarea.cols= "50";
			textarea.onfocus= expand;
			textarea.onblur= collapse;
			textarea.placeholder = "Message";
			textarea.style="resize:none;";

			var a = document.createElement("a");
			a.href="#";
			a.setAttribute("class", "tiny button hidden");
			a.onclick= addCard;
			a.innerHTML = "Post";

			var divPanel = document.createElement("div");
			divPanel.setAttribute("class", "panel");
			divPanel.style = "background-color: rgb(202, 210, 204);";
			divPanel.appendChild(label);
			divPanel.appendChild(input);
			divPanel.appendChild(textarea)
			divPanel.appendChild(a);

			var div8Col = document.createElement("div");
			div8Col.setAttribute("class", "large-8 columns");
			div8Col.id = "content";
			div8Col.appendChild(divPanel);

			var divRow = document.createElement("div");
			divRow.setAttribute("class", "row");
			divRow.appendChild(div8Col);

			var form = document.createElement("form");
			form.appendChild(divRow);

			var large12 = document.createElement("div");
			large12.setAttribute("class", "large-12 columns");
			large12.appendChild(form);

			var outerRow = document.createElement("div");
			outerRow.setAttribute("class", "row");
			outerRow.appendChild(large12);

			return outerRow;
	    }

	    function getFirstChildWithTagName( element, tagName ) {
	      	for ( var i = 0; i < element.childNodes.length; i++ ) {
	        	if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
	      	}
	    }

	    function getHash( url ) {
	      	var hashPos = url.lastIndexOf ( '#' );
	      	return url.substring( hashPos + 1 );
	    }

		function addCard() {

			var content = document.getElementById('content');
			var title_input = document.getElementById('titleinput');
			var message_input = document.getElementById('messageinput');
			var i = 0;
			var added = false;
			
			while(!added)
			{
				if(!document.getElementById('card' + i))
				{
					var card_title = document.createElement("div");
					card_title.setAttribute("class","cardtitle");
					card_title.setAttribute("id", "card-title-"+i);

					card_title.innerHTML = title_input.value;
					
					var hr = document.createElement("hr");

					var card_message = document.createElement("div");
					card_message.setAttribute("class","cardmessage");
					card_message.setAttribute("id", "card-message-"+i);
					card_message.innerHTML = message_input.value;
					
					var ele = document.createElement("div");
					ele.setAttribute("id","card" + i);
					ele.setAttribute("class","panel");
					ele.setAttribute("style", "background-color: rgb(202, 210, 204);");
					ele.appendChild(card_title);
					ele.appendChild(hr);
					ele.appendChild(card_message);

					var edit = document.createElement("a");
					edit.setAttribute("href", "comment.html");
					edit.setAttribute("id", "edit-" + i);
					//edit.setAttribute("onclick", "editCard(" + i + ");");
					edit.innerHTML = "view";

					ele.appendChild(edit);

					title_input.value = "";
					message_input.value = "";


					if(i == 0)
						content.appendChild(ele);
					else content.insertBefore(ele, document.getElementById("card" + (i - 1)));
					
					added = true;
				}
				i++;
			}
		}

		function editCard(i) {
			/*
			var editButton =document.getElementById("edit-" + i); 
			editButton.setAttribute("style", "display:none");
			var cardtitle = document.getElementById("card-title-" + i);
			var cardmessage = document.getElementById("card-message-" + i);
			console.log(cardtitle.innerHTML);
			console.log(cardmessage.innerHTML);

			var newCardTitle = document.createElement("input");
			newCardTitle.type = "text";
			newCardTitle.value = cardtitle.innerHTML;

			var newCardMessage = document.createElement("input");
			newCardMessage.type = "text";
			newCardMessage.value = cardmessage.innerHTML;

			cardtitle.innerHTML = "";
			cardmessage.innerHTML = "";

			cardtitle.appendChild(newCardTitle);
			cardmessage.appendChild(newCardMessage);


			var card = document.getElementById("card" + i);
			card.class = "panel";
			
			*/
		}	
		
		function expand() {
			$('textarea.expand').animate({'height':"+=50px"}, 400);
			//$('a.tiny.button.hidden').css({'display': 'inline-block'});
			
		}
		
		function collapse() {
			$('textarea.expand').animate({'height':"-=50px"}, 400);
			//$('a.tiny.button.hidden').css({'display': 'none'});

		}
	</script>
  </head>

  <body onload="init()">
    
   
    <div class="row">
      <div class="large-18 columns">
        	<h1>Welcome to Teacher's Desk</h1>
      </div>
    </div>
    
    <div class="row">
    	<ul id="tabs">
      		<li><a href="#webapps">WEBAPPS</a></li>
      		<li><a href="#stresme">STRESME</a></li>
      		<li><a href="#hciface">HCIFACE</a></li>
      		<li><a href="#algocom">ALGOCOM</a></li>
    	</ul>

    	
	    		
	    	

    </div>
    
    

    
    
    <!-- CONTENT -->
    <div class="row">


    			<div class="tabContent" id="webapps">
			      	<h2>WEBAPPS</h2>
			      	<div>
			        	<p>Web Applications</p>
			        	
			      	</div>
			    </div>

			    <div class="tabContent" id="stresme">
			      	<h2>STRESME</h2>
			      	<div>
			        	<p>ST Research Methods</p>
			        	
			      	</div>
			    </div>

			    <div class="tabContent" id="hciface">
			      	<h2>HCIFACE</h2>
			      	<div>
			        	<p>Human Computer Interface</p>
			      	</div>
			    </div>

			    <div class="tabContent" id="algocom">
			      	<h2>ALGOCOM</h2>
			      	<div>
			        	<p>Algorithm and Complexity</p>
			      	</div>
				</div>

			<!-- NEW CARD 
	    <div class="row" >
			<div class="large-12 columns">

				<form>
					<div class="row">
						<div class="large-8 columns" id="content">
							<div class="panel" style="background-color: rgb(202, 210, 204);">
								<label>Write a new Card</label>
								<input id="titleinput" type="text" placeholder="Title" />
								<textarea id="messageinput" class="expand" rows="1" cols="50" onfocus="expand();" onblur="collapse();" placeholder="Message" style="resize:none;"/></textarea>
								<a href="#" class="tiny button hidden" onclick="addCard();">Post</a>
							</div>
						</div>
					</div>
				</form>
			</div>
	    </div>
		-->
    </div>
	
	

	
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
    	//$(document).foundation();
    </script>
  </body>
</html>
